<!DOCTYPE html>
<html lang="en">
<head>
    <title>Transfer Funds</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link href="fdl-bootstrap/css/fdl-bootstrap.css" rel="stylesheet" type="text/css" />
    <link href="assets/css/bootstrap-drawer.css" rel="stylesheet" />
    <link href="assets/css/jquery_ui.css" rel="stylesheet" />
    <link href="assets/css/style.css" rel="stylesheet" type="text/css" />
    <link href="assets/css/custom.css" rel="stylesheet" type="text/css" /> 
    <link href="assets/css/mobile_frame.css" rel="stylesheet" type="text/css" /> 
</head>
<body>
	<div class="bank_frame">
    <div class="bank_header">
        <div class="header_section">
            <div class="bank_top_menu">
                <ul>
                    <li><a href="javascript:void(0);" class="active" title="Mobile"><img src="assets/images/messsage.jpg" width="28" height="23" border="0" />mobile</a><span> | </span></li>
                    <li><a href="javascript:void(0);" title="Approvals">approvals (1)</a> <span> | </span></li>
                    <li><a href="javascript:void(0);" title="Activity">activity</a> <span> | </span></li>
                    <li><a href="javascript:void(0);" title="Settings">settings</a> <span> | </span></li>
                    <li><a href="javascript:void(0);" title="Log Out">log out</a></li>
                </ul>
            </div>
            <div class="bank_logo">
                <a href="javascript:void(0);" title="MyFinanacial Logo"><img src="assets/images/myfinancial.jpg" width="272" height="58" border="0" alt="My Financial, Inc" title="My Financial, Inc"/></a>
            </div>
        </div>            
    </div>
    <div class="clearfix"></div>
    <div class="mobmenu">
        <ul class="menu">
            <li><a href="javascript:void(0);" title="Accounts">Accounts</a></li>
            <li><a href="transfer_funds.html" class="active" title="Transfers">Transfers</a></li>
            <li><a href="javascript:void(0);" title="Wires">Wires</a></li>
            <li><a href="javascript:void(0);" title="Pay Bills">Pay Bills</a></li>
            <li><a href="javascript:void(0);" title="Send with Zelle">Send with Zelle<sup>&reg;</sup></a></li>
            <li><a href="javascript:void(0);" title="Trends">Trends</a></li>
            <li><a href="javascript:void(0);" title="Inovice and Payments">Invoice and Payments</a></li>
        </ul>
    </div>
    <div id="ust">
      <div id="menuac"> <span></span> </div>
    </div>
</div>

    <div class="container">
        <a href="#content" class="sr-only sr-only-focusable" id="top">Skip to Content</a>
        <header class="navbar navbar-default navbar-ext">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-haspopup="true" aria-controls="navbar" aria-label="Navigation" aria-expanded="false">
                    <i class="material-icons" aria-hidden="true">apps</i>
                    Menu
                </button>
                <span class="navbar-brand selected mt15">
                    Transfer Funds
                </span>
            </div>
            
            <div class="header-one bankLogoSection"> 
                <div class="bank-name col-xs-9 col-md-10">MyFinancial Bank</div>
                <div class="signout col-xs-3 col-md-2"><a href="javascript:void(0);" title="Sign Out">Sign Out</a></div> 
            </div>
            <nav class="navbar-collapse collapse" id="navbar" aria-expanded="false" role="navigation">
                <ul class="nav navbar-nav">
                    <li><a href="transfer_funds.html" title="Transfer Funds" class="selected">Transfer Funds</a></li>
                    <li><a href="activity.html" title="Activity">Activity</a></li>
                    <li><a href="preferences.html" title="Preferences" >Preferences</a></li>
                    <li><a href="help.html" title="Help" >Help</a></li>
                </ul>	
            </nav>
        </header>
        <section id="content" role="main">
        	<div id="verifyPhoneSection">
        	 <form id="otp_tranfer" method="get" action="transfer_funds_confirm.html">
                	<input type="hidden"  id="transferFund" name="transferType" />
                 	<input type="hidden"  id="from" name="from" />
                    <input type="hidden"  id="to" name="to" />                                                     
                    <input type="hidden"  id="send_on" name="sendOn" />
                    <input type="hidden"  id="end_on" name="endOn" />
                    <input type="hidden"  id="end_on_text" name="endOnText" /> 
                    <input type="hidden"  id="frequency" name="frequency" />  
                    <input type="hidden"  id="duration" name="duration" /> 
                    <input type="hidden"  id="total_amt" name="amount" />
                    <input type="hidden"  id="no_transfer" name="noOfTransfers" />
                    <input type="hidden"  id="specifiedAmount" name="totalAmount" />                  
                    <input type="hidden"  id="delivery" name="deliverySpeed" />                   
                    <input type="hidden"  id="email_id" name="recipientEmail" />
                    <input type="hidden"  id="personal_msg" name="personalMsg" />
                    <input type="hidden"  id="memo_msg" name="memo" />
                    <input type="hidden"  id="feesAmount" name="fees" />
                    <input type="hidden"  id="totalTransferAmount" name="finalAmount" />                   
              </form>
            <h1 id="additonalVerifyText">Verification Needed</h1>
            <div class="tips-wrapper mt20" id="verifyAlert">
                <div class="alert alert-dismissible alert-info">
                    <i class="material-icons" aria-hidden="true">&#xE88E;</i>
                    <span class="sr-only">info</span>
                    <p>
                        For security, we need additional verification before we can complete your transfer. You'll need your phone for this step.
                    </p>                    
                </div>
            </div>
            
            
            <div id="resendVerification"> <!-- Code verification starts -->
                <h1>Resend Code To 650-123-4567</h1>
                <div class="mt20">
                    <p>If you're having trouble receiving a code by text, select the Call me option.</p>
                </div>
            </div> <!-- Ends -->
            <fieldset class="form-fieldset" id="verifyMode">            	
                <legend id="phoneNumber">We'll send a code to <strong>650-123-4567</strong></legend>           
                <div class="row form-group mt10">
                    <div class="col-xs-12 col-sm-9 col-md-6">
                        <div class="radio">
                            <input type="radio" id="msg" name="myRadio" value="myRadioOption" checked="checked" aria-invalid="false">
                            <label for="msg"><span>Text me</span></label>
                            <p class="ml30">Messaging and data rates may apply.</p>
                            <div>
                                <a href="javascript:void(0);" class="ml30" data-toggle="collapse" data-target="#collapseList" id="seeList" title="Supported Carriers">Supported carriers<i class="material-icons">&#xE315;</i><span class="sr-only">Expand</span></a>
                                <div id="collapseList" class="collapse">
                                	<div class="ml30 radio">
                                    	<ul class="collapse-carrier-ul">
                                        	<li>Acg_Ntelos</li>
                                            <li>AT&T</li>
                                            <li>ALLTEL</li>
                                            <li>Boost</li>
                                            <li>Cincinnati Bell</li>
                                            <li>Nextel</li>
                                            <li>Sprint</li>
                                            <li>T-Mobile</li>
                                            <li>US Cellular</li>
                                            <li>Verizon</li>
                                            <li>Virgin Mobile USA</li>
                                        </ul>
                                    </div>
                                    <a href="javascript:void(0);" class="ml30" id="hideList">Hide supported carriers<i class="material-icons">&#xE316;</i></a>
                                </div>
                                <p class="ml30" id="msgText">If your carrier isn't supported, select Call me.</p>
                            </div>
                        </div>
                        <div class="radio">
                            <input type="radio" id="call" name="myRadio" value="myRadioOption" aria-invalid="false">
                            <label for="call"><span>Call Me</span></label>
                            <p class="ml30" id="callText">You will need a pen and paper ready to write down the code.</p>
                        </div>
                    </div>
                </div>
            </fieldset>                
            
            <!-- <div class="form-group" id="alternateVerfication">
                <div class="row">
                    <div class="col-xs-10 col-sm-10 col-md-12">
                        <span>No access to Phone?</span>
                        <a href="javascript:void(0);" class="" data-toggle="" data-target="" id="altVerifiy" title="Click here for alternative verification">
                            Click here for alternative verification <span class="sr-only"> Opens Dialog</span>
                        </a>
                    </div>
                </div>
            </div>  -->
            
            
                       
            <div id="phoneVerfication">  <!-- Code verification starts -->
               <!-- <fieldset class="form-fieldset">
                    <legend>Enter the verification code that was sent to 650-123-4567</legend>
                </fieldset>-->

                <div class="row form-group mt20">
                    <div class="col-xs-12 col-sm-5 col-md-5">
                 	   <form id="otpVerification">
                            <label for="txtPhnVeri"><span>Enter the code we sent to 650-123-4567

</span></label>                        
                            <input type="text" id="txtPhnVeri" name="txtPhnVeri" placeholder="" class="form-control" aria-invalid="false" maxlength="6">
                        </form>
                    </div>
                </div>
                <div class="form-group mt20">
                    <div class="row">
                        <div class="col-xs-10 col-sm-10 col-md-12">
                            <a href="javascript:void(0);" class="" data-toggle="modal" data-target="" id="verifyCode" title="Resend Code">
                                Resend Code<span class="sr-only"> Opens Dialog</span>
                            </a>
                        </div>
                    </div>
                </div> 
            </div> 
           <div class="form-group" id="otpVerify">
                <div class="custom-btn col-xs-12">
                    <button type="button" class="btn btn-secondary" title="Cancel" id="otpTransferCancel">Cancel<span class="sr-only"> Preferences</span></button>
                    <button type="submit" class="btn btn-primary" title="Continue" id="otpTransferContinue">Continue</button>
                </div>
            </div> 
            <!-- Ends -->
           
            <div class="form-group" id="otpResendButton">
                <div class="custom-btn col-xs-12">
                    <button type="button" class="btn btn-secondary" title="Cancel" id="otpCancel">Cancel<span class="sr-only"> Preferences</span></button>
                    <button type="submit" class="btn btn-primary" title="Continue" id="otpContinue">Continue</button>
                </div>
            </div>
           </div> 
            <div id="holdOnCancel"> <!-- Code verification starts -->
                <h1>Alert</h1>
                <h4 class="mt10 h4">Transfer on Hold</h4>
                <div class="mt10">
                    <p>
             	      Before we can send this transfer for <span id="amountSent">25</span>, we need to verify your identity. This transaction will be canceled on 
                      <span id="startingDate">08/31/2017</span> without your verification.
                    </p>
                </div>
                <div class="custom-btn col-xs-12">                  
                    <button type="submit" class="btn btn-primary" title="Verify" id="holdVerify">Verify</button>
                </div>
            </div>
        </section>                
           
              
        <footer class="footer footerSection">
            <div id="footerHeader" class="container footer-wrapper">
                <div class="text-center pb10">
                    <span><a href="javascript:void(0);" title="Terms of Services">Terms of Services</a></span>
                    <span>| <a href="javascript:void(0);" title="Privacy Policy">Privacy Policy</a></span>
<span>| <a href="javascript:void(0);" title="Security Policy">Security Policy</a></span>
                </div>
                <div class="text-center"><small>Copyright © <span id="currYear"></span> Fiserv Inc. All rights reserved</small></div>
            </div>    
        </footer>
    </div>
    <!--FDL JS-->
    
    <!-- Loader Starts -->

<div id="pageLoader" style="display:none;">
    <div id="loader-fade"></div>
    <div id="loading-spinner">
        <div class="spinner-icon" aria-label="loading..."></div>
    </div>
</div>

<!-- Loader Ends -->
    <script src="fdl-bootstrap/js/jquery.min.js" type="text/javascript"></script>
    <script src="fdl-bootstrap/js/bootstrap.min.js" type="text/javascript"></script>    
    <script src="assets/js/drawer.js" type="text/javascript"></script>    
    <script src="assets/js/jquery.validate.min.js" type="text/javascript"></script>
    <script src="assets/js/app.js" type="text/javascript"></script>
    <script src="assets/js/moment.min.js" type="text/javascript"></script> 
    <script>

	/*********************************************************
	*	 Getting URL parameters & values using jquery		 *
	*********************************************************/
			
	$.extend({
		getUrlVars: function(){
			var vars = [], hash;
			var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
			for(var i = 0; i < hashes.length; i++){
				hash = hashes[i].split('=');
				vars.push(hash[0]);
				vars[hash[0]] = hash[1];
			}
			return vars;
		},
		getUrlVar: function(name){
			return $.getUrlVars()[name];
		}
	});
	var allVars = $.getUrlVars();
	</script>
	<script>
    $(document).ready(function(){	
		
		/*************************************************************************************************
		* 	  Getting URL parameters & values using jquery and storing it in the hidden input fields,    * 
		* 		 On Submitting the form, values will be passed to the next page using GET Method.	     *	
		*									 															 *
		* Reference : http://jquery-howto.blogspot.in/2009/09/get-url-parameters-values-with-jquery.html *
		*************************************************************************************************/

		var transfer = encodeURI($.getUrlVar('transferType')).replace(/\+/g, " ");					
		var freq = encodeURI($.getUrlVar('frequency')).replace(/\+/g, " ");			
		var delvry = encodeURI($.getUrlVar('deliverySpeed')).replace(/\+/g, " ").replace('%2540', '@').replace('%2528','(').replace('%2529',')').replace(/\+/g,' ').replace(/\%20/g," ");									
		var duration = encodeURI($.getUrlVar('duration')).replace(/\+/g, " ");	
		var from = encodeURI($.getUrlVar('from')).replace('%2528','(').replace('%2529',')').replace(/\+/g,' ').replace(/\%20/g," ").replace(/\ %2524/g," $").replace(/\%252C/g,",");									
		var to = encodeURI($.getUrlVar('to')).replace('%2540', '@').replace('%2528','(').replace('%2529',')').replace(/\+/g,' ').replace(/\%20/g," ").replace(/\%2524/g,"$").replace(/\%252C/g,",");				
		var amount = encodeURI($.getUrlVar('amount')).replace(/\+/g, " ").replace(/\%2524/g,"$");						
		var start = encodeURI($.getUrlVar('sendOn')).replace(/\+/g, " ").replace(/\%252C/g, ",").replace(/\%252F/g ,'/'); 					
		var end = encodeURI($.getUrlVar('endOn')).replace(/\+/g, " ").replace(/\%252C/g, ",").replace(/\%252F/g ,'/').replace('%2528','(').replace('%2529',')');					
		var ending_text = encodeURI($.getUrlVar('endOnText')).replace('%2540', '@').replace('%2528','(').replace('%2529',')').replace(/\+/g,' ').replace(/\%20/g," ");					
		var email = encodeURI($.getUrlVar('recipientEmail')).replace(/\+/g, " ").replace(/\%2540/g, "@");		
		var msg = encodeURI($.getUrlVar('personalMsg')).replace(/\+/g, " ").replace(/\%252C/g, ",").replace(/\%253F/g,"!").replace(/\%2521/g,"?").replace(/\%250D%250A/g," ").replace(/\%2527/g, "'").replace(/\%2540/g, "@");
        var memo = encodeURI($.getUrlVar('memo')).replace(/\+/g,' ').replace(/\%20/g," ").replace(/\%253F/g,"!").replace(/\%2521/g,"?").replace(/\%250D%250A/g," ").replace(/\%2527/g, "'").replace(/\%2540/g, "@");
		var fee = encodeURI($.getUrlVar('fees')).replace(/\+/g,' ').replace(/\%20/g," ").replace(/\%2524/g,"$");	
		var final_amt = encodeURI($.getUrlVar('finalAmount')).replace(/\+/g,' ').replace(/\%20/g," ").replace(/\%2524/g,"$").replace(/\%24/g,"$");		
		var total_amt = encodeURI($.getUrlVar('totalAmount')).replace(/\+/g, " ").replace(/\%252C/g, ",");						
		var no_transfer = encodeURI($.getUrlVar('noOfTransfers')).replace(/\+/g, " ").replace(/\%252C/g, ",");						
		var rec_email = encodeURI($.getUrlVar('chooseRecipientEmail')).replace(/\+/g, " ").replace(/\%252C/g, ",");	
		
		$('#transferFund').val(transfer);
		$('#total_amt').val(amount);
		$('#from').val(from);
		$('#to').val(to);		
		$('#send_on').val(start);
		$('#end_on').val(end);
		$('#end_on_text').val(ending_text);
		$('#frequency').val(freq);
		$('#delivery').val(delvry);
		$('#duration').val(duration);
		$('#specifiedAmount').val(total_amt);
		$('#no_transfer').val(no_transfer);
		$('#email_id').val(email);
		$('#personal_msg').val(msg);
		$('#memo_msg').val(memo);
		$('#feesAmount').val(fee);
		$('#totalTransferAmount').val(final_amt);
   
   		// Display tha Amount transferred after cancel(Alert)
				
		$("#amountSent").text(final_amt);		
		
		
		moment.fn.addWorkdays = function (days) {
			var increment = days / Math.abs(days);
			var date = this.clone().add(Math.floor(Math.abs(days) / 5) * 7 * increment, 'days');
			var remaining = days;
			while(remaining) {
			  date.add(increment, 'days');			 
			 remaining -= increment;
			}
			return date;
		};
			
		var startDate = start;												
		startDate = moment(startDate);									
		var twoday = startDate.addWorkdays(2).format('MM/DD/YYYY');	
		$("#startingDate").text(twoday);												
	
			
		/*	Validation	*/
   
   		$('#otpVerification').validate({			
			rules: {	
				txtPhnVeri: {				
					 required : true,
					 minlength : 6,
					 maxlength : 6,				 
			 }	
			},
			messages: {	
				txtPhnVeri : { 				
					required : "Please enter a valid code.",
					minlength : "Please enter a valid code." 
				}			
			},
			errorClass: 'alert-message-error',
			errorElement:'p'				
		});	
		
		$("#otpVerify, #phoneVerfication, #resendVerification, #callText, #holdOnCancel").hide();
				
		/* Amount field - checking the entered value is number and the dot separation   */
				   
		   $('#txtPhnVeri').keyup(function(e){	
				var phone = $(this).val();   
				phone = phone.replace(/[^0-9]/g,'');											
				$(this).val(phone);							
			});
				
		
			$("#call").click(function(){				
				$("#callText").show();
				$("#msgText, #seeList").hide();
				
			});
							
			$("#msg").click(function(){			
				$("#msgText, #seeList").show();
				$("#callText").hide();
			});
			
		
		$("#otpContinue").click(function(){
			$("#pageLoader").show();	
			setTimeout(function() {		
			$("#phoneVerfication, #otpVerify, #additonalVerifyText").show();	
			$("#verifyAlert, #phoneNumber, #verifyMode, #resendVerification,#alternateVerfication,#otpResendButton").hide();						
			$("#pageLoader").hide();
		}, 300);
			
		});
		
		
		$("#verifyCode").click(function(){			
			$("#pageLoader").show();	
			setTimeout(function() {	
				$("#txtPhnVeri").val("");					
				$("#otpResendButton, #verifyMode, #resendVerification, #otpCancel, #otpContinue").show();	
				$("#otpVerify, #phoneVerfication, #additonalVerifyText").hide();						
				$("#pageLoader").hide();
			}, 300);		
		});					
		
		$("#otpTransferContinue").click(function(){
			if ($('#otpVerification').valid()){
				$("#pageLoader").show();	
				setTimeout(function() {						
					$("#otp_tranfer").submit();
					$("#pageLoader").hide();
				}, 300);	
			} else {
				return false;
			}						        
		});
				
		$("#otpCancel, #otpTransferCancel").click(function(){			
			$("#pageLoader").show();	
				setTimeout(function() {						
					$('#verifyPhoneSection').hide();
					$("#holdOnCancel").show();
					$("#pageLoader").hide();
			}, 300);
		});
		
		$("#holdVerify").click(function(){
			$("#pageLoader").show();	
				setTimeout(function() {						
					$('#verifyPhoneSection, #additonalVerifyText, #verifyAlert, #phoneNumber, #verifyMode, #alternateVerfication, #otpResendButton').show();
					$("#holdOnCancel, #otpVerify, #phoneVerfication").hide();
					$("#pageLoader").hide();
			}, 300);
		});
		
		$('#menuac').click(function(e){	
			$('#menuac').toggleClass('acik');
			$('.mobmenu').toggleClass('mobmenu-acik');
		});	
	});
	</script>
</body>
</html>